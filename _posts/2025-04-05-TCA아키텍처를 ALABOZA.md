---
title: "[Swift] TCA ì•„í‚¤í…ì²˜ë¥¼ ALABOZA"
date: 2025-04-05 21:43 +0900
categories:
  - ğŸ Dev
  - Swift
tags:
  - Swift
  - SwiftUI
  - Pattern
  - Percevy
---
ì˜ˆì „ì— [SwiftUI ì•„í‚¤í…ì²˜ì— ëŒ€í•œ í•™ìŠµ](https://0hooni.github.io/posts/MVVM-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%ED%8C%A8%ED%84%B4-(1%ED%83%84-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0)/)ì„ í•˜ë‹¤ê°€ ìš°ì—°íˆ TCAë¥¼ ì•Œê²Œ ëœ ì¼ì´ ìˆì—ˆë‹¤. 

ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ìë©´ SwiftUIëŠ” ì´ë¯¸ MVVM êµ¬ì¡°ë¡œ êµ¬ì„±ì´ ë˜ì–´ìˆê¸°ì—, ì—¬ê¸°ì— MVVMì„ ì ìš©í•˜ëŠ” ê²ƒì€ ë‚  ìˆ˜ ìˆëŠ” ìŠ¤ì¼€ì´íŠ¸ë³´ë“œì— ë°”í€´ë¥¼ ë‹¬ì•„ì¤€ ëª¨ì–‘ì´ë¼ë‚˜. 

ì–´ëŠì •ë„ ê³µê°ì´ ë˜ê¸´ í–ˆëŠ”ë°...

ì§€ê¸ˆ ìƒê°í•´ë³´ë©´ ì‚¬ì‹¤ ì•„í‚¤í…ì²˜ íŒ¨í„´ì´ë€ ë‹¨ìˆœ ì½”ë“œì˜ íë¦„ì„ ì¡ì•„ì£¼ëŠ”ê²ƒ ë¿ë§Œ ì•„ë‹ˆë¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬ì™€ ê°™ì€ ì—­í• ì˜ ë¶„ë¦¬ì™€ ê°™ì€ ì¤‘ìš”ì ë„ ìˆìœ¼ë‹ˆ ë­.

_ì£¼ì ˆíˆ ì£¼ì ˆíˆ ê°ì„¤í•˜ê³  ğŸ‘»_

ê·¸ ë‹¹ì‹œ ê³µë¶€ë¥¼ í•˜ë‹¤ê°€ TCAê°€ SwiftUIì—ì„œ ë‹¨ë°©í–¥ íë¦„ì„ ë§Œë“¤ì–´ì¤„ ìˆ˜ ìˆëŠ” ì¢‹ì€ ëŒ€ì•ˆì´ì—ˆë‹¤ëŠ” ê²ƒì„ ë³´ê³  ê³„ì† í¥ë¯¸ë§Œ ê°–ê³  ìˆì—ˆëŠ”ë°

ì´ë²ˆì— ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ë³´ëŠ” í† ì´ í”„ë¡œì íŠ¸ì—ì„œ í˜¼ì iOSë¥¼ ë‹´ë‹¹í•˜ê²Œ ë¼ì„œ ê²¸ì‚¬ê²¸ì‚¬ í•˜ê³  ì‹¶ì—ˆë˜ ê²ƒë“¤ì„ ë‹¤ ì €ì§ˆëŸ¬ ë³¼ ê¹Œ í•œë‹¤.

ì´ë²ˆ ê¸€ì—ì„œëŠ” 1ì°¨ì ìœ¼ë¡œ [TCA GitHub](https://github.com/pointfreeco/swift-composable-architecture)ì— ì í˜€ìˆëŠ” ë‚´ìš©ì„ ì‹œì‘ìœ¼ë¡œ ì •ë¦¬í•˜ë©´ì„œ TCAì— ëŒ€í•´ ì•Œì•„ê°€ë³¼ê¹Œ ì‹¶ë‹¤.

# ğŸ“¦ TCA

**The Composable Architecture**ëŠ” SwiftUI ì• í”Œë¦¬ì¼€ì´ì…˜ì„ **ì¼ê´€ë˜ê³ , í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë©°, ì¡°í•© ê°€ëŠ¥í•œ ë°©ì‹ìœ¼ë¡œ** êµ¬ì¶•í•˜ê¸° ìœ„í•œ ì•„í‚¤í…ì³ë‹¤.

> ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ **Composable(ì¡°í•© ê°€ëŠ¥í•œ)**ì€ TCAì˜ í•µì‹¬ ì² í•™ì´ë‹¤

TCAëŠ” ì•±ì„ êµ¬ì„±í•  ë•Œ, í•˜ë‚˜ì˜ ê±°ëŒ€í•œ êµ¬ì¡° ì•ˆì—ì„œ ëª¨ë“  ê±¸ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

ëŒ€ì‹ , í™”ë©´ì´ë‚˜ ê¸°ëŠ¥ ë‹¨ìœ„ë¡œ ì‘ì€ ë¡œì§ë“¤ì„ ë‚˜ëˆ„ê³ , ì´ê±¸ í•„ìš”í•  ë•Œ ì¡°ë¦½í•˜ë“¯ ì´ì–´ë¶™ì¼ ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¥¼ ì œê³µí•œë‹¤.

ë•ë¶„ì— ì¡°ì§í™”ë˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ê³„ë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

ë˜í•œ TCAì˜ ë˜ ë‹¤ë¥¸ í•µì‹¬ íŠ¹ì§•ì´ ìˆë‹¤.

> íë¦„ ì œì–´ë¥¼ ìœ„í•œ ë‹¨ë°©í–¥ ë°ì´í„° í†µì‹ ì„ ì§€ì›í•œë‹¤

SwiftUIëŠ” ìì²´ì ìœ¼ë¡œ MVVM êµ¬ì¡°ë¥¼ ë”°ë¥´ê³  ìˆì§€ë§Œ, ì‹¤ì œ ë³µì¡í•œ ì•±ì„ ê°œë°œí•˜ë‹¤ ë³´ë©´ MVVM ë§Œìœ¼ë¡œëŠ” êµ¬ì¡°ì  í•œê³„ì— ë¶€ë”ªíŒë‹¤. 

ì˜ˆë¥¼ ë“¤ì–´, ìƒíƒœ(State)ì˜ íë¦„ì´ ì–‘ë°©í–¥ìœ¼ë¡œ í¼ì§€ê²Œ ë˜ë©´ ì–´ëŠ ì‹œì ì—ì„œ ì–´ë–  ê°’ì´ ë°”ë€Œì—ˆëŠ”ì§€ ì¶”ì í•˜ê¸° ì–´ë ¤ì›Œì§€ê³ , ì´ë¡œ ì¸í•´ ë””ë²„ê¹…ì´ ì–´ë ¤ì›Œì§€ê±°ë‚˜ ì‚¬ì´ë“œ ì´í™íŠ¸ê°€ ì–´ë””ì—ì„œ ë°œìƒí–ˆëŠ”ì§€ ê°ì„ ì¡ê¸° í˜ë“¤ì–´ì§„ë‹¤.

TCAëŠ” ì´ëŸ° ë³µì¡í•¨ì„ ë§‰ê¸° ìœ„í•´, ëª¨ë“  ë°ì´í„°ì˜ íë¦„ì„ í•œ ë°©í–¥ìœ¼ë¡œë§Œ íë¥´ê²Œ ê°•ì œí•œë‹¤. 

_ì‹¬ì§€ì–´ ë¹„ë™ê¸° ì‘ì—…ì˜ íë¦„ë§ˆì €ë„ ğŸ˜®_

ê·¸ë ‡ë‹¤ë©´ TCAì—ì„œëŠ” ì–´ë–»ê²Œ ì•±ì„ ì¡°ì§í™”í•˜ê³  ë˜ ë°ì´í„°ì˜ íë¦„ì„ ê°•ì œí• ê¹Œ

## âš™ï¸ TCAì˜ êµ¬ì„± ìš”ì†Œ ë° íë¦„

![TCA ë°ì´í„° íë¦„](assets/img/post/2025/04_05_TCA_ë°ì´í„°_íë¦„.png){: w="800"}_TCA ë°ì´í„° íë¦„_

> [!TIP]
> **ìœ„ì˜ ì‚¬ì§„ê³¼ ì•„ë˜ì˜ ì„¤ëª…ì„ ë²ˆê°ˆì•„ ë³´ë©´ ì¢€ ë” ì´í•´ê°€ ì‰½ë‹¤**


### State - ìƒíƒœ
> **ì•±ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìˆœìˆ˜ ë°ì´í„° êµ¬ì¡°**

- Structë¡œ ì •ì˜ë˜ë©°, Viewì™€ ì§ì ‘ ë°”ì¸ë”©ë˜ì–´ í™”ë©´ì„ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©
- ê°„ë‹¨í•œ ì˜ˆì‹œë¡œ í˜„ì¬ ì¹´ìš´íŠ¸ ê°’, ë¡œë”© ì¤‘ ì—¬ë¶€, ë„¤íŠ¸ì›Œí¬ ì‘ë‹µ ê²°ê³¼ ë“±
- ëª¨ë“  StateëŠ” Reducerì— ì˜í•´ ë³€ê²½ë˜ê³ , ë³€ê²½ë˜ë©´ ViewëŠ” ìë™ìœ¼ë¡œ ë¦¬ë Œë”ë§

```swift
struct CounterState: Equatable {
    var count: Int = 0
    var isLoading: Bool = false
}
```

### Action - í–‰ë™/ì´ë²¤íŠ¸
> **ì‚¬ìš©ìì˜ ì…ë ¥ì´ë‚˜ ì™¸ë¶€ ì´ë²¤íŠ¸ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì—´ê±°í˜•**

- enumìœ¼ë¡œ ì •ì˜ë˜ë©°, Viewì—ì„œ ë°œìƒí•˜ê±°ë‚˜ Effectì˜ ê²°ê³¼ë¡œ ì „ë‹¬
- ReducerëŠ” ì´ Actionì„ ë°›ì•„ì„œ ì ì ˆí•œ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰

```swift
enum CounterAction: Equatable {
    case incrementButtonTapped
    case decrementButtonTapped
    case fetchData
    case dataResponse(Result<Data, Error>)
}
```

### Reducer - ìƒíƒœ ë³€ê²½ ì²˜ë¦¬
> **Actionì„ ë°›ì•„ Stateë¥¼ ë³€ê²½í•˜ê³ , í•„ìš” ì‹œ Effectë¥¼ ë°˜í™˜í•˜ëŠ” ìˆœìˆ˜ í•¨ìˆ˜**

- Reducer<State, Action, Enviroment> í˜•íƒœë¡œ êµ¬ì„±
- ëª¨ë“  ìƒíƒœ ë³€í™”ëŠ” Reducerë¥¼ í†µí•´ì„œë§Œ ë°œìƒ
- View ë¡œì§ê³¼ ë¶„ë¦¬ë˜ì–´ ìˆì–´ í…ŒìŠ¤íŠ¸ê°€ ìš©ì´

```swift
let counterReducer = Reducer<CounterState, CounterAction, CounterEnvironment> { state, action, env in
    switch action {
    case .incrementButtonTapped:
        state.count += 1
        return .none
    case .fetchData:
        return .run { send in
            let result = try await env.apiClient.fetchData()
            await send(.dataResponse(result))
        }
    }
    case .dataResponse(let result):
	Â  Â  state.data = result
	Â  Â  state.isLoading = false
	Â  Â  return .none
}
```

### Effect - ì‘ì—…/ë¹„ë™ê¸° ì²˜ë¦¬
> **ë¹„ë™ê¸° ì‘ì—…, ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ìƒí˜¸ì‘ìš©, ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ëª…ì‹œì ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ê°’**

- ì£¼ë¡œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­, íƒ€ì´ë¨¸, ì•Œë¦¼, íŒŒì¼ I/Oë“± ì™¸ë¶€ì™€ì˜ ìƒí˜¸ì‘ìš©ì„ í‘œí˜„
- ì‹¤í–‰ í›„ ë‹¤ì‹œ Actionì„ ë°œìƒì‹œì¼œ Reducerë¡œ í˜ëŸ¬ë“¤ì–´ê°
- ê·¸ ê²°ê³¼ë¡œ ìƒˆë¡œìš´ Actionì´ ë°œìƒ
- ì´ ê³¼ì •ì„ í†µí•´ **ë¹„ë™ê¸° ì‘ì—…ë„ ì™„ì „íˆ ë‹¨ë°©í–¥ íë¦„ ì•ˆì—ì„œ í†µì œ**

```swift
Effect.run { send in
	let result = try await env.apiClient.fetchData()
	await send(.dataResponse(result))
}
```

### Store - ìƒíƒœ ë° ë¡œì§ ê´€ë¦¬ í—ˆë¸Œ
> **Viewì™€ Reducer, Stateë¥¼ ì—°ê²°í•´ì£¼ëŠ” ì¤‘ì‹¬ ê°ì²´**

- ViewëŠ” Storeë¥¼ í†µí•´ Actionì„ ë³´ë‚´ê³ , Stateë¥¼ êµ¬ë…
- ë‚´ë¶€ì ìœ¼ë¡œëŠ” Stateë¥¼ ë³´ê´€í•˜ê³ , Actionì´ ì˜¤ë©´ Reducerë¥¼ í˜¸ì¶œí•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ì²˜ë¦¬
- í•„ìš”í•˜ë‹¤ë©´ Environmentë¥¼ ì´ìš©í•˜ì—¬ ì™¸ë¶€ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ
- ë§ˆì¹˜ ì•±ì˜ RunLoopì™€ ê°™ì´ ì „ì²´ íë¦„ì„ ì¤‘ì•™ì—ì„œ í†µì œí•´ì£¼ëŠ” ì—­í• ì„ í•´ì¤€ë‹¤ ë³¼ ìˆ˜ ìˆìŒ

```swift
let store = Store(
    initialState: CounterState(),
    reducer: counterReducer,
    environment: CounterEnvironment()
)
```

### Environment - ì™¸ë¶€ ì˜ì¡´ì„±
> ë„¤íŠ¸ì›Œí¬, ë””ìŠ¤í¬, íƒ€ì´ë¨¸ ë“± ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ì—°ê²°ì„ ë‹´ë‹¹í•˜ëŠ” êµ¬ì¡°ì²´

- ReducerëŠ” ì™¸ë¶€ ì˜ì¡´ì„±ì„ ì§ì ‘ ì•Œì§€ ì•Šê³ , Environmentë¥¼ í†µí•´ ê°„ì ‘ì ìœ¼ë¡œ ì‚¬ìš©
- í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” ì´ë¥¼ ì‰½ê²Œ Mockingí•  ìˆ˜ ìˆì–´ í…ŒìŠ¤íŠ¸ ì‘ì„±ì´ ì‰¬ì›Œì§

```swift
struct CounterEnvironment {
    var apiClient: APIClient
    var mainQueue: AnySchedulerOf<DispatchQueue>
}
```

# ğŸ ë§ˆë¬´ë¦¬
ì´ë²ˆ ê¸€ì„ í†µí•´ TCAì˜ ê¸°ë³¸ ê°œë…ê³¼ êµ¬ì„± ìš”ì†Œë¥¼ ê°„ë‹¨íˆ ì •ë¦¬í•´ë´¤ë‹¤. 

SwiftUIê°€ MVVMì„ ìì—°ìŠ¤ëŸ½ê²Œ ë”°ë¥´ê³  ìˆëŠ” êµ¬ì¡°ë¼ê³ ëŠ” í•˜ì§€ë§Œ, ì‹¤ì œë¡œ ë³µì¡í•œ ì•±ì„ ê°œë°œí• ìˆ˜ë¡ **ì—­í•  ë¶„ë¦¬, ìƒíƒœ ê´€ë¦¬, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ì˜ˆì¸¡ ê°€ëŠ¥ì„±**ì´ ì ì  ë” ì¤‘ìš”í•´ì§€ê¸° ë§ˆë ¨ì´ë‹¤.

ê·¸ëŸ° ë©´ì—ì„œ TCAëŠ” SwiftUIì— ë‹¨ë°©í–¥ íë¦„ì„ ê°•ì œí•¨ìœ¼ë¡œì¨, **ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°**ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. 

ë¬¼ë¡  ëŸ¬ë‹ì»¤ë¸Œê°€ ìˆê¸´ í•˜ì§€ë§Œ, ì¼ë‹¨ ìµìˆ™í•´ì§€ë©´ ì˜¤íˆë ¤ ìƒíƒœì™€ ë¡œì§ì„ ì •ë¦¬í•˜ê³  ê´€ë¦¬í•˜ëŠ”ë° í° ë„ì›€ì´ ë  ìˆ˜ ìˆë‹¤ ìƒê°í•œë‹¤.

> ì•„~ ë²Œì¨ ì¬ë°Œì–´ ë³´ì¸ë‹¤ ã…‹ã……ã…‹ ğŸ¤©

# ğŸ”— ë ˆí¼ëŸ°ìŠ¤
> **í•´ë‹¹ ìë£Œë¥¼ ì°¾ì•„ë³´ë©° ë„ì›€ì´ ëë˜ ë§í¬**
>- [TCA GitHub](https://github.com/pointfreeco/swift-composable-architecture)
>- [[iOS] ë‚´ê°€ ë³´ë ¤ê³  ì •ë¦¬í•˜ëŠ” TCA (The Composable Architecture) ê¸°ì´ˆ](https://mini-min-dev.tistory.com/320)
>- [SwiftUI TCA - 3. State, Action, Reducer, Effect â€” Clamp](https://clamp-coding.tistory.com/516)