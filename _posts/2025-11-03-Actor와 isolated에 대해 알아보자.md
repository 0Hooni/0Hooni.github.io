---
title: "[Swift] Actorì™€ isolatedì— ëŒ€í•´ ì•Œì•„ë³´ì"
date: 2025-11-03 16:13 +0900
categories:
  - ğŸ iOS
  - Swift
tags:
  - Swift
  - Concurrency
---
ìµœê·¼ ê°„ë‹¨í•œ ë¹„ë””ì˜¤ ë°ëª¨ ì•±ì„ ê°œë°œí•˜ë©° **ì»´íŒŒì¼ íƒ€ì„ Thread Safety**ë¥¼ ì§ì ‘ ê²½í—˜í•˜ê¸° ìœ„í•´ Swift 6ë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤.

ì´ì „ê¹Œì§€ëŠ” Swiftê°€ ìŠ¤ë ˆë“œ ê°„ ì „í™˜ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ ì£¼ì—ˆê¸° ë•Œë¬¸ì—, ì„¸ë°€í•˜ê²Œ ë™ì‹œì„± ë¬¸ì œë¥¼ ì‹ ê²½ ì“°ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ Swift 6ì—ì„œëŠ” Thread Safetyë¥¼ ê°•í™”í•˜ë©´ì„œ ìŠ¤ë ˆë“œ ê´€ë ¨ ê²½ê³ ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆê³ , ì´ë¥¼ **Strict ëª¨ë“œ**ë¡œ ë‘ë©´ ë‹¤ìˆ˜ì˜ ê²½ê³ ì™€ ì˜¤ë¥˜ë¥¼ ë§ˆì£¼í•˜ê²Œ ë©ë‹ˆë‹¤.

ì´ ê³¼ì •ì—ì„œ ìì—°ìŠ¤ëŸ½ê²Œ `actor`, `@MainActor`, `isolated`, `nonisolated` ê°™ì€ ìƒˆë¡œìš´ í‚¤ì›Œë“œë¥¼ ì ‘í•˜ê²Œ ë©ë‹ˆë‹¤.

ì´ë²ˆ ê¸€ì—ì„œëŠ” Swift ë™ì‹œì„± ëª¨ë¸ì˜ í•µì‹¬ì¸ **Actor ì‹œìŠ¤í…œ**ì„ ì¤‘ì‹¬ìœ¼ë¡œ, ì´ í‚¤ì›Œë“œë“¤ì´ ì–´ë–»ê²Œ ìŠ¤ë ˆë“œ ì•ˆì „ì„±ì„ ë³´ì¥í•˜ëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

## ğŸ¦º Actor - Thread safety type

### ì •ì˜

ActorëŠ” Classì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì°¸ì¡° íƒ€ì…ì´ì§€ë§Œ, ë‚´ë¶€ ë™ì‘ ë°©ì‹ì´ ë‹¤ë¦…ë‹ˆë‹¤.

**Actor**ëŠ” **race condition**ì„ ë°©ì§€í•˜ë©°, **í•œ ì‹œì ì— í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ë‚´ë¶€ ìƒíƒœì— ì ‘ê·¼**í•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

ì•„ë˜ ì˜ˆì‹œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

~~~swift
// âŒ Class: ë°ì´í„° ë ˆì´ìŠ¤ ê°€ëŠ¥
class BankAccount {
    var balance: Int = 0

    func deposit(_ amount: Int) {
        balance += amount  // ğŸš¨ ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ ë™ì‹œì— ì ‘ê·¼í•˜ë©´ ë¬¸ì œ ë°œìƒ
    }
}


let account = BankAccount()
Task { account.deposit(100) }
Task { account.deposit(100) }
~~~

ìœ„ ì˜ˆì œì—ì„œ `deposit()`ì„ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— í˜¸ì¶œí•˜ë©´ `balance` í”„ë¡œí¼í‹°ì— race conditionì´ ë°œìƒí•©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ì´ ë¬¸ì œë¥¼ **Actor**ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ ê°€ëŠ¥í•œê±¸ê¹Œìš”?

### ì‘ë™ ì›ë¦¬ 1 - Isolation

Actorë¥¼ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ í”„ë¡œí¼í‹°ëŠ” **ìì‹ ì˜ ê³ ìœ í•œ ê²©ë¦¬ ì˜ì—­(isolation)** ì•ˆì— ì¡´ì¬í•˜ê²Œ ë©ë‹ˆë‹¤.

ì•„ê¹Œ Classë¥¼ Actorë¡œ ë°”ê¿”ë³´ê² ìŠµë‹ˆë‹¤.

~~~swift
// âœ… Actor: ë°ì´í„° ë ˆì´ìŠ¤ ë°©ì§€
actor SafeBankAccount {
    var balance: Int = 0

    func deposit(_ amount: Int) {
        balance += amount  // âœ… í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ì ‘ê·¼ ê°€ëŠ¥
    }
}

let account = SafeBankAccount()
Task { await account.deposit(100) }
Task { await account.deposit(100) }
~~~

ì´ì œ ë‚´ë¶€ í”„ë¡œí¼í‹°ëŠ” `SafeBankAccount`ì˜ ê²©ë¦¬ ì˜ì—­ì— ì¡´ì¬í•˜ê²Œ ë©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ê²©ë¦¬ ì˜ì—­ì„ ë§Œë“¦ìœ¼ë¡œì¨ ActorëŠ” **Thread safety**ë¥¼ ìœ„í•œ ê¸°ë°˜ì„ ì–»ìŠµë‹ˆë‹¤.

### ì‘ë™ ì›ë¦¬ 2 - Serial Executor

ActorëŠ” **í•œ ì‹œì ì— ì˜¤ì§ í•˜ë‚˜ì˜ Taskë§Œ** ë‚´ë¶€ ìƒíƒœì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ë°ìš”.

ì´ëŠ” Actorê°€ ë‚´ë¶€ì ìœ¼ë¡œ **serial executor**ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

serial executorëŠ” **Actor ë‚´ë¶€ì˜ ì½”ë“œë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬**í•˜ë„ë¡ ë§Œë“­ë‹ˆë‹¤.

ê·¸ë ‡ê¸°ì— í•œ ì‹œì ì— ì˜¤ì§ í•˜ë‚˜ì˜ Taskë§Œ ë“¤ì–´ì˜¤ê³ , ê²©ë¦¬ ì˜ì—­ì— ëŒ€í•œ ì ‘ê·¼ ë˜í•œ ë™ì‹œì— ë°œìƒí•˜ì§€ ì•ŠëŠ” ê²ƒì´ì£ .

ìœ„ ì˜ˆì œ ì½”ë“œë¥¼ ë³´ë©´ ì´ì œ ì™¸ë¶€ì—ì„œ actorì˜ ìƒíƒœë¥¼ ë°”ê¾¸ê¸° ìœ„í•œ `deposit()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ awaitë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆëŠ”ë°ìš”.

ì´ ë˜í•œ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ì‹œ ì´ë¥¼ ì§ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•´ì£¼ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

### ê²°ê³¼ì ìœ¼ë¡œ

ActorëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ Thread Safetyë¥¼ ë‹¬ì„±í•©ë‹ˆë‹¤.

- ê°ì²´ ìƒíƒœë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ê²©ë¦¬í•˜ê³ 
- isolationì„ ë‹¤ë£°ë•ŒëŠ” ì§ë ¬ì ìœ¼ë¡œ ì ‘ê·¼í•˜ì—¬
- race conditionì„ ë°©ì§€í•˜ê³ 
- Thread Safetyë¥¼ ë‹¬ì„±í•œë‹¤

## ğŸŒ @MainActorì™€ Global Actor

### @MainActorë€?

ë°©ê¸ˆ ì´í•´í•œ Actorê°€ ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œë¥¼ ìœ„í•œ ê²ƒì´ì—ˆë‹¤ë©´ 

`@MainActor`ëŠ” ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ ìœ„í•œ Actorë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¼ë°˜ì ìœ¼ë¡œ UI ìš”ì†ŒëŠ” í•­ìƒ ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œë§Œ ë™ì‘í•´ì•¼ í•©ë‹ˆë‹¤. 

ê·¸ë˜ì„œ ì´ë¥¼ ë³´ì¥í•´ì£¼ê¸° ìœ„í•´ UIKit, SwiftUIì˜ ëŒ€ë¶€ë¶„ì˜ í™”ë©´ë“¤ì€ @MainActorë¥¼ ì±„íƒí•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ì¶”ê°€ì ìœ¼ë¡œ ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ë™ì‘í•˜ë„ë¡ ë³´ì¥í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´ ì§ì ‘ `@MainActor` í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì£¼ë©´ ë˜ëŠ”ë°ìš”.

ì•„ë˜ì˜ ì˜ˆì‹œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

~~~swift
@MainActor
class ContentViewModel: ObservableObject {
    @Published var displayText: String = ""

    func updateText() {
        displayText = "Updated"  // âœ… ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œë§Œ ì‹¤í–‰ë¨
    }
}
~~~

ë§Œì•½ `@MainActor` ì–´ë…¸í…Œì´ì…˜ì„ ë”°ë¡œ ë¶™ì—¬ì£¼ì§€ ì•Šì•˜ë‹¤ë©´ `displayText`ì˜ ê°’ì´ ë³€í•˜ëŠ” ì‹œì ì˜ ìŠ¤ë ˆë“œê°€ ì–´ë””ì¸ì§€ ë³´ì¥ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ì´ë¥¼ ìœ„í•´ ì—¬ëŸ¬ ë°©ë²•ì´ ìˆê² ì§€ë§Œ, ì˜ˆì‹œì™€ ê°™ì´ í•´ë‹¹ ViewModelì— `@MainActor` ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤€ë‹¤ë©´ ë‚´ë¶€ì˜ ë™ì‘ë“¤ì€ ëª¨ë‘ ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰í•œë‹¤ëŠ” ë³´ì¥ì„ í•´ì¤„ ìˆ˜ ìˆëŠ”ê²ƒì´ì£ .

### Global Actorë€?

Global ActorëŠ” **ì „ì—­ì ìœ¼ë¡œ ê³µìœ ë˜ëŠ” ë‹¨ì¼ Actor**ì…ë‹ˆë‹¤. `@MainActor` ë˜í•œ Global Actorì…ë‹ˆë‹¤.

ì¼ë°˜ Actorê°€ ë…ë¦½ëœ isolation ì˜ì—­ì„ ê°€ì§€ëŠ” ë°˜ë©´, Global ActorëŠ” ì•± ì „ì²´ì—ì„œ í•˜ë‚˜ì˜ isolation ì˜ì—­ì„ ê³µìœ í•©ë‹ˆë‹¤.

~~~swift
@MainActor
class ViewModel1 { var data = "" }

@MainActor
class ViewModel2 { var data = "" }

// ViewModel1ê³¼ ViewModel2ëŠ” ê°™ì€ MainActor ê²©ë¦¬ ì˜ì—­ì„ ê³µìœ 
~~~

## ğŸ«¥ isolatedì™€ nonisolated

### isolated â€” ê²©ë¦¬ ì˜ì—­ ë‚´ë¶€ (ê¸°ë³¸ ìƒíƒœ)

Actor ë‚´ë¶€ì˜ ëª¨ë“  í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **isolated ìƒíƒœ**ì…ë‹ˆë‹¤.

ì¦‰, Actorì˜ ê²©ë¦¬ ì˜ì—­ ì•ˆì—ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©° ì™¸ë¶€ì—ì„œëŠ” `await`ë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.

~~~swift
actor Counter {
    var count = 0  // isolated

    func increment() {  // isolated
        count += 1
    }
}

let counter = Counter()
await counter.increment()  // âš ï¸ await í•„ìš”
~~~
### nonisolated â€” ê²©ë¦¬ ì˜ì—­ ì™¸ë¶€

actor ì¸ìŠ¤í„´ìŠ¤ì˜ ëª¨ë“  ì½”ë“œë“¤ì´ serial executorì— ì˜í•´ ì§ë ¬ì ì¸ ìˆ˜í–‰ì„ í•„ìš”ë¡œ í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ëŸ´ ë•ŒëŠ” `nonisolated` í‚¤ì›Œë“œë¥¼ ë¶™ì´ë©´ í•´ë‹¹ ë©”ì„œë“œëŠ” Actorì˜ ê²©ë¦¬ ì˜ì—­ ë°–ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

ì•„ë˜ ì˜ˆì‹œì™€ ê°™ì€ ìƒí™©ì—ì„œ ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

~~~swift
actor Calculator {
    var history: [Int] = []  // isolated

    func addToHistory(_ value: Int) {
        history.append(value)
    }

    nonisolated func calculate(_ a: Int, _ b: Int) -> Int {
        return a + b  // âœ… ìƒíƒœ ì ‘ê·¼ ì—†ìŒ, await ë¶ˆí•„ìš”
    }
}
~~~

ì˜ˆì‹œì²˜ëŸ¼ `calculate(_:, _:)` í•¨ìˆ˜ëŠ” ì „í˜€ Actor ë‚´ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ”ë° ê´€ì‹¬ì´ ì—†ìŠµë‹ˆë‹¤. 

ì´ë ‡ê²Œ Actorì˜ ìƒíƒœì— ì ‘ê·¼í•˜ì§€ ì•Šê±°ë‚˜, ìˆœìˆ˜ ê³„ì‚° ë¡œì§ì¼ ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.

### ì°¨ì´ ì •ë¦¬

| êµ¬ë¶„ | isolated (ê¸°ë³¸) | nonisolated |
|------|------------------|--------------|
| Actor ìƒíƒœ ì ‘ê·¼ | âœ… ê°€ëŠ¥ | âŒ ë¶ˆê°€ëŠ¥ |
| ì™¸ë¶€ í˜¸ì¶œ ì‹œ await | âš ï¸ í•„ìš” | âœ… ë¶ˆí•„ìš” |
| ì‹¤í–‰ ìˆœì„œ ë³´ì¥ | ìˆœì°¨ì  | ë³‘ë ¬ ê°€ëŠ¥ |
| ì‚¬ìš© ì˜ˆ | ìƒíƒœ ë³€ê²½, ë‚´ë¶€ ë¡œì§ | ìˆœìˆ˜ ê³„ì‚°, ë¶ˆë³€ ë°ì´í„° |

## ğŸ ë§ˆë¬´ë¦¬
### Swift ë™ì‹œì„± í•µì‹¬

| í‚¤ì›Œë“œ | ì„¤ëª… | ì‚¬ìš© ì‹œì  |
|--------|------|-----------|
| `actor` | ìŠ¤ë ˆë“œ ì•ˆì „í•œ ì°¸ì¡° íƒ€ì… | ê³µìœ  ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•  ë•Œ |
| `@MainActor` | ë©”ì¸ ìŠ¤ë ˆë“œ ì „ìš© Global Actor | UI ì—…ë°ì´íŠ¸ ë¡œì§ |
| `isolated` | Actorì˜ ê²©ë¦¬ ì˜ì—­ ë‚´ë¶€ | ìƒíƒœ ë³€ê²½ ë©”ì„œë“œ |
| `nonisolated` | Actor ê²©ë¦¬ ì˜ì—­ ì™¸ë¶€ | ìˆœìˆ˜ ê³„ì‚°, ë¶ˆë³€ ë°ì´í„° |
ì •ë¦¬í•´ë³´ë©´

ActorëŠ” Classê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” race conditionì— ëŒ€í•œ ë¬¸ì œë¥¼ í•´ê²°í•´ì£¼ê¸° í•µì‹¬ ë„êµ¬ì…ë‹ˆë‹¤.

ë‚´ë¶€ ìƒíƒœë¥¼ ê²©ë¦¬í•˜ê³ , ì§ë ¬ì ìœ¼ë¡œ ì½”ë“œë¥¼ ìˆ˜í–‰í•˜ì—¬

ìµœì¢…ì ìœ¼ë¡œëŠ” Thread safetyí•œ ì½”ë“œë¥¼ ë§Œë“œëŠ” ê²ƒì´ì£ .

ë˜í•œ ìƒí™©ì— ë”°ë¼ `isolated`ì™€ `nonisolated`ë¥¼ ì¡°í•©í•œë‹¤ë©´ ë” ìœ ì—°í•œ ë™ì‹œ ì œì–´ê°€ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

ì´ì œëŠ” ìì‹ ìˆê²Œ actorì™€ `@MainActor`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ìƒí™©ì— ë”°ë¼ ì œì–´ìë¥¼ ë‘ì–´ ì ì ˆí•œ concurrencyë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê²ƒ ê°™ìŠµë‹ˆë‹¤.

## ğŸ”— ë ˆí¼ëŸ°ìŠ¤
> **í•´ë‹¹ ìë£Œë¥¼ ì°¾ì•„ë³´ë©° ë„ì›€ì´ ëë˜ ë§í¬**
>- [Actor \| Apple Developer Documentation](https://developer.apple.com/documentation/swift/actor)
>- [SerialExecutor \| Apple Developer Documentation](https://developer.apple.com/documentation/swift/serialexecutor)
>- ['iOS/Concurrency' ê¸€ ëª©ë¡](https://dev-with-precious-dreams.tistory.com/category/iOS/Concurrency)