---
title: "[Swift] GitHub Actionsë¥¼ ì´ìš©í•œ TestFlight ë°°í¬ ìë™í™” - íŒ€ ê°œë°œìì˜ CD êµ¬ì¶•"
date: 2025-04-11 15:59 +0900
categories:
  - ğŸ iOS
  - Swift
tags:
  - DevOps
  - PopPool
  - Project
---

íŒí’€ í”„ë¡œì íŠ¸ì—ì„œ ì²« ë°°í¬ë¥¼ ë§ˆì¹œ ë’¤, ë³¸ê²©ì ìœ¼ë¡œ ì°¨ê¸° ë²„ì „ì„ ì¤€ë¹„í•˜ë©´ì„œ **ë°°í¬ ê³¼ì •ì„ ìë™í™”í•˜ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.**

ìƒê°ì˜ ì‹œì‘ì€ ë‹¨ìˆœí–ˆë‹¤. ë¹Œë“œí•˜ê³ , ì¶”ì¶œí•˜ê³ , ì˜¬ë¦¬ê³ ... ë°°í¬ê¹Œì§€ëŠ” ìˆ˜ì‘ì—…ì´ ë„ˆë¬´ ë§ì•˜ë‹¤.

íŠ¹íˆ **ì• ìì¼í•˜ê²Œ ìì£¼ ë¹Œë“œí•˜ê³  í…ŒìŠ¤íŠ¸í•´ì•¼ í•˜ëŠ” ìƒí™©**ì—ì„œëŠ” ì´ëŸ° ë°˜ë³µ ì‘ì—…ì´ íë¦„ì„ ëŠê¸°ê²Œ ë§Œë“¤ê³ , íŒ€ì˜ ê°œë°œ ì‹œê°„ë„ ê³„ì† ëºê¸¸ ìˆ˜ ìˆë‹¤ ìƒê°í–ˆë‹¤.

_**(âœ¨ ê°œë°œìì˜ ì‹œê°„ì€ ì†Œì¤‘í•˜ë‹ˆê¹Œ âœ¨)**_

ê·¸ë˜ì„œ CDë¥¼ ë„ì…í•´ì•¼ ê² ë‹¤ í•˜ë©° ì•¼ì‹¬ì°¨ê²Œ ì‹œì‘í–ˆëŠ”ë°...

ë°°í¬í•œ ê³„ì •ì˜ ì†Œìœ ì£¼ê°€ ì•„ë‹Œ íŒ€ ê°œë°œìê°€ CDë¥¼ ì•¼ë¬´ì§€ê²Œ êµ¬í˜„í• ë§Œí•œ ë°©ë²•ë“¤ì´ ê±°ì˜ ë³´ì´ì§€ ì•Šì•˜ë‹¤.

ê·¸ëŸ¬ë‹¤ ìš°ì—°íˆ [TestFlight ìë™í™”](https://sujinnaljin.medium.com/ci-cd-github-actions-%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-testflight-%EC%97%85%EB%A1%9C%EB%93%9C-%EC%9E%90%EB%8F%99%ED%99%94-8ecdbeb227a3) ê¸€ì„ ë³´ê²Œ ë˜ì—ˆê³ , 

"ì™¸ë¶€ ê°œë°œìì—¬ë„ App Store Connect APIì™€ GitHub Actionsë¥¼ ì´ìš©í•˜ì—¬ CD êµ¬ì¶•ì´ ê°€ëŠ¥í•˜ê² ë‹¤!"

ëŠ” ìƒê°ì— ë„ì „í•˜ê²Œ ë˜ì—ˆë‹¤.

## ğŸ§‘ğŸ»â€ğŸ’» íŒ€ ê°œë°œìê°€ CDë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì¡°ê±´

ë‚´ê°€ íŒ€ ê°œë°œìë¡œì„œ CD í™˜ê²½ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ì¤€ë¹„í•œê±´ ë‹¤ìŒê³¼ ê°™ë‹¤.

- **[App Store Connect API Key 3ì¢…](https://developer.apple.com/help/app-store-connect/get-started/app-store-connect-api/):** Issuer ID, API Key ID, Private key
- **[ì¸ì¦ì„œ](https://hsdev.tistory.com/entry/iOS-%EC%95%B1-%EB%B0%B0%ED%8F%AC-1-2-Certificates-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0)ì™€ [í”„ë¡œë¹„ì €ë‹ í”„ë¡œíŒŒì¼](https://hsdev.tistory.com/entry/iOS-%EC%95%B1-%EB%B0%B0%ED%8F%AC-3-Provisioning-Profile-%ED%94%84%EB%A1%9C%EB%B9%84%EC%A0%80%EB%8B%9D-%ED%94%84%EB%A1%9C%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0):** ê¸°ë³¸ íŒŒì¼ 2ì¢…, gpgë¡œ ì•”í™”í•œ íŒŒì¼ 2ì¢…

ì¼ë°˜ì ìœ¼ë¡œ ì•±ìŠ¤í† ì–´ ê°œë°œì í”„ë¡œê·¸ë¨ ì •ì±…ì— ë”°ë¼ ê°œì¸ ê³„ì •ì€ íŒ€ì›ì„ ì´ˆëŒ€í•˜ê³  ê¶Œí•œì„ ì•„ë¬´ë¦¬ ëŒì–´ì˜¬ë¦¬ë”ë¼ë„ ëª»í•˜ëŠ” ê²ƒë“¤ì´ ì¢€ ë§ë‹¤.

ê·¸ ì¤‘ **API Key ë°œê¸‰ê³¼ ì¸ì¦ì„œ, í”„ë¡œë¹„ì €ë‹**ì´ ê·¸ì— ì†í–ˆë‹¤. 

ë˜í•œ fastlaneì²˜ëŸ¼ ëª¨ë“  ê±¸ ì•Œì•„ì„œ í•´ì£¼ëŠ” ë„êµ¬ë¥¼ ì“°ê¸° ìœ„í•´ì„œëŠ” ì• í”Œ ì•„ì´ë””ë¥¼ ì•„ì˜ˆ ë“±ë¡í•˜ëŠ” ê²½ìš°ë„ ìˆëŠ”ë°, ì´ëŸ°ê²ƒë„ íŒ€ ê°œë°œìë¡œ ë¶ˆê°€ëŠ¥ì˜ ì˜ì—­ì´ì—ˆë‹¤.

ê·¸ë˜ì„œ ì• í”Œ ê³„ì • ìš”êµ¬ë¥¼ í•˜ì§€ ì•ŠëŠ” ë²”ìœ„ì—ì„œ ì¶”ê°€ íŒŒì¼ì„ ìš”ì²­í•œë’¤ **GitHub Actions + App Store Connect API**ë¥¼ ì´ìš©í•´ì„œ ë§Œë“¤ê²Œ ëë‹¤.

_**(ì´ì¯¤ë˜ë‹ˆ ê³„ì • ì†Œìœ ì£¼ ë‚©ì¹˜ê°€ ì‹œê¸‰í•¨ ğŸ¤£)**_

## ğŸ” CD êµ¬ì¶• ê³¼ì •

CDì˜ íë¦„ì€ ì•„ë˜ì²˜ëŸ¼ ê°„ë‹¨íˆ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤. 

1. release/* ë¸Œëœì¹˜ì— PRì´ ì—´ë¦´ ë•Œ íŠ¸ë¦¬ê±°
2. ë¹Œë“œ ë²ˆí˜¸ ìë™ ì„¤ì •
3. ë¹Œë“œ ì„¸íŒ…
4. ì•± ì•„ì¹´ì´ë¸Œ & ipa ì¶”ì¶œ
5. TestFlight ì—…ë¡œë“œ

ì „ë°˜ì ì¸ ì›Œí¬í”Œë¡œìš° êµ¬ì¶•ì€ [TestFlight ìë™í™”](https://sujinnaljin.medium.com/ci-cd-github-actions-%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-testflight-%EC%97%85%EB%A1%9C%EB%93%9C-%EC%9E%90%EB%8F%99%ED%99%94-8ecdbeb227a3) ìë£Œë¥¼ ë§ì´ ì°¸ê³ í•˜ë©° ë§Œë“¤ì—ˆë‹¤. 

ê·¸ë¦¬ê³  ë ˆí¼ëŸ°ìŠ¤ë¥¼ ê¸°ë°˜í•´ì„œ íŒ€ì— ë§ê²Œ ê°œì„ í•œ ì½”ë“œëŠ” [ì—¬ê¸°](https://github.com/PopPool/iOS/blob/develop/.github/workflows/deploy_on_release.yml)ì„œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.

ì´ ì¤‘ ë‚´ê°€ í•„ìš”í•´ì„œ ë„£ì—ˆë˜ ì¶”ê°€ Stepì€ xcconfig ìƒì„±ê³¼ ë¹Œë“œ ë²„ì „ ì„¸íŒ…ì´ì—ˆëŠ”ë°,,,

ë¹Œë“œ ë²„ì „ ì„¸íŒ…ì—ì„œ ë§¤ìš° ë§ì€ ë¬¸ì œë¥¼ ê²ªì—ˆë‹¤. ğŸ’¢

## ğŸš¨ ë²ˆë“¤ ë²„ì „ ìë™í™” ë¯¸ì ìš©

ì²˜ìŒì— ë²ˆë“¤ ë²„ì „ì— ë¬¸ì œê°€ ìˆë‹¤ëŠ”ê±´ ì›Œí¬í”Œë¡œìš°ë¥¼ ë‹¤ êµ¬í˜„í–ˆì—ˆì„ ë•Œ ì¯¤ì´ì—ˆë‹¤.

ë²ˆë“¤ ë²„ì „ì„ í¬ê²Œ ì‹ ê²½ì“°ì§€ ì•Šê³  ìˆì—ˆëŠ”ë°, TestFlightì— ì—…ë¡œë“œ í•˜ë ¤ë‹ˆê¹Œ ë²„ì „ì´ ë‚®ë‹¤ëŠ” ë¬¸ì œë¡œ ì›Œí¬í”Œë¡œìš°ê°€ ì‹¤íŒ¨í•œ ê²ƒì´ì—ˆë‹¤.

ê·¸ë˜ì„œ ë²„ì „ì„ ìˆ˜ì •í•˜ê³  ìˆì—ˆëŠ”ë°, ì´ê²ƒë„ ìë™í™”ê°€ ë˜ì§€ ì•Šì„ê¹Œ? 

í•˜ê³  ì›Œí¬í”Œë¡œìš°ì— ìë™ ë²„ì „ ë²”í•‘ì„ ì¶”ê°€í•˜ë ¤ê³  ì‹œë„í–ˆë‹¤.

![](assets/img/post/2025/04_11_ë‚œë¦¬ë‚œ_ì»¤ë°‹.png){: width="600"}_**(ê·¸ë ‡ê²Œ 2ì¼ì´ ì§€ë‚˜ê³  ğŸ« )**_

ì§„ì§œ ìë™ ë²„ì €ë‹ì— ëŒ€í•´ ì—´ì‹¬íˆ ì•Œì•„ë³´ê³  ì´ê²ƒì €ê²ƒ ì ìš©í•´ë´¤ëŠ”ë° í•˜ë‚˜ê°™ì´ ë²„ì „ì´ ì˜¤ë¥´ì§€ê°€ ì•Šì•˜ë‹¤.

ëŒ€ë¶€ë¶„ì˜ ë ˆí¼ëŸ°ìŠ¤ì—ì„œ ìë™ ë²ˆë“¤ ë²„ì „ ë²”í•‘ì„ ìœ„í•´ 

`Info.plist`ì˜ `CFBundleVersion`ì„ ìˆ˜ì •í•˜ëŠ” Run Scriptë¥¼ êµ¬ì„±í•˜ê±°ë‚˜, 

ì›Œí¬í”Œë¡œìš°ì—ì„œ ìˆ˜ì •í•˜ëŠ” ë°©ì‹ì´ì—ˆë‹¤.

ë‚˜ë„ ì²˜ìŒì—ëŠ” ì´ë ‡ê²Œ ì ìš©ì„ í–ˆëŠ”ë°,,,,,

ëª‡ë²ˆì„ í•´ë„ **ì¶”ì¶œëœ ipaì—ì„œëŠ” Bundle Versionì´ `Info.plist`ì˜ ë²„ì „ì„ ë”°ë¼ê°€ì§€ ì•ŠëŠ” ê²ƒ**ì´ì—ˆë‹¤.

### ë¬¸ì œì˜ ì›ì¸

ë‚˜ë„ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì—´ì‹¬íˆ ë””ë²„ê¹…ì„ í•˜ë˜ ì¤‘ ì•Œê²Œëœ í•µì‹¬ì€

1. **í”„ë¡œì íŠ¸ ì„¤ì •ì˜ ë²ˆë“¤ ë²„ì „ì€ `Info.plist`ì˜ `CFBundleVersion`ê³¼ ê°™ì§€ ì•Šë‹¤ëŠ” ê²ƒ**
2. **ì¶”ì¶œëœ ipaëŠ” í”„ë¡œì íŠ¸ ì„¤ì •ì˜ ë²ˆë“¤ ë²„ì „ì„ ë”°ë¥¸ë‹¤ëŠ” ê²ƒ**

`Info.plist`ëŠ” ë³€ìˆ˜ë¥¼ ë„£ì–´ì¤„ ìˆ˜ ìˆëŠ”ë° ì´ ë•Œ `CFBundleVersion`ì— ê¸°ë³¸ìœ¼ë¡œ `$(CURRENT_PROJECT_VERSION)`ì„ í• ë‹¹í•´ì£¼ì–´ ë‘˜ì„ ê°™ë‹¤ê³  ì¸ì‹í•œ ê²ƒì´ì—ˆë‹¤.

ê·¸ë˜ì„œ ì•„ë¬´ë¦¬ ë ˆí¼ëŸ°ìŠ¤ì˜ ë°©ì‹ì„ ë”°ë¼í•˜ë”ë¼ë„ `CFBundleVersion`ì„ ë°”ê¾¸ë©´ ê·¸ëƒ¥ ë³€ìˆ˜ê°€ íŠ¹ì • ìƒìˆ˜ë¡œ ë°”ë€” ë¿,

ì›í•˜ë˜ ë¹Œë“œ ë²„ì „(ë¹Œë“œ ì„¤ì •ì˜ `CURRENT_PROJECT_VERSION`)ì´ ì˜¤ë¥´ëŠ” ê²°ê³¼ë¥¼ ë‚´ì§„ ì•Šë˜ ê²ƒì´ì—ˆë‹¤.

_**(ì•Œê³ ë³´ë‹ˆ ë ˆí¼ëŸ°ìŠ¤ë“¤ì´ ê±°ì˜ 5~10ë…„ ì§€ë‚¬ë˜ ê±°ê¸°ë„ í–ˆìŒ ğŸ¥²)**_

íŠ¹íˆ [ì´ ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ì˜ ì§ˆë¬¸](https://stackoverflow.com/questions/69261679/current-project-version-in-build-settings-not-updating-as-expected/73365699)ì´ ë‚´ ë¬¸ì œ ìƒí™©ê³¼ ê°€ì¥ ìœ ì‚¬í–ˆì—ˆë‹¤.

### ë¹Œë“œ ìë™ ë²”í•‘ ì™„ì„±í•˜ê¸°

ì²˜ìŒì—ëŠ” Info.plistì— ê°’ì„ ë°”ê¾¸ëŠ”ê±´ í–ˆìœ¼ë‹ˆ ë¹Œë“œ ì„¤ì •ì„ ë§ì¶° ë°”ê¾¸ë©´ ë˜ê² ì§€ í–ˆì—ˆëŠ”ë°,

ì¢€ë§Œ ê³ ë¯¼í•´ë³´ë‹ˆê¹Œ ì´ê±° ì•ˆì¢‹ì€ ë°©ì‹ ê°™ì•˜ë‹¤

`.pbxproj` íŒŒì¼ì´ ë¹Œë“œí•  ë•Œ ë§ˆë‹¤ `Info.plist`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜ì •ëœë‹¤ê³ ...?

íŒŒì¼ì˜ ì¤‘ìš”ë„ê°€ ì—­ì „ë˜ëŠ” í˜„ìƒì´ì—ˆë‹¤.

ê·¸ë¦¬ê³  í•˜ë”ë¼ë„ ë¬¸ì œëŠ” ë§¤ ë¹Œë“œë§ˆë‹¤ ë²ˆí˜¸ê°€ ê³„ì† ë°”ë€Œì–´ì„œ Gitì˜ Change logì—ë„ ëœ¨ëŠ”ê²Œ ê±°ìŠ¬ë ¸ë‹¤.

#### **ìµœì¢…ì ìœ¼ë¡œ**

```yaml
- name: "#ï¸âƒ£ Set Build Number"
  run: |
    BUILD_NUMBER=$(TZ=Asia/Seoul date +%y%m%d.%H%M)
    cd Poppool
    agvtool new-version -all "$BUILD_NUMBER"
```

GitHub Actionì˜ ì¶”ê°€ Stepì„ ë§Œë“¤ì–´ ë¹Œë“œ ë²ˆí˜¸ë¥¼ ì„¤ì •í•´ì£¼ëŠ” ë°©ì‹ì„ ì ìš©í–ˆë‹¤.

ì´ ë•Œ ë¹Œë“œ ë²ˆí˜¸ë¥¼ ì„¤ì •í•´ì£¼ê¸° ìœ„í•´ [agvtools](https://developer.apple.com/library/archive/qa/qa1827/_index.html)ì„ ì‚¬ìš©í•´ì£¼ì—ˆë‹¤.

ë¹Œë“œë²ˆí˜¸ ê·œì¹™ì€ í•­ìƒ ìš°ìƒí–¥í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ `YYMMDD.HHmm` í˜•íƒœë¥¼ ì ìš©í–ˆë‹¤.

_**(ì˜¤íˆë ¤ ì¢€ ë” ì§ê´€ì ì´ê¸°ë„?)**_

ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ í”„ë¡œì íŠ¸ì˜ ì„¤ì •ì´ ë°”ë€Œì§€ ì•Šë‹¤ë³´ë‹ˆ change logë„ ëœ¨ì§€ ì•Šê³ ,

ë§ˆì¼“íŒ… ë²„ì „ì€ ì§ì ‘ ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ ì¢‹ì•˜ë˜ê²ƒ ê°™ë‹¤.

## ğŸ ë§ˆì¹˜ë©°

ì´ ê¸€ì„ í†µí•´ ê³„ì • ì†Œìœ ì£¼ê°€ ì•„ë‹Œ íŒ€ ê°œë°œìê°€ CDë¥¼ êµ¬ì¶•í•˜ëŠ”ë° í•„ìš”í•œ ì •ë³´ì™€ ë‚´ê°€ ê²ªì€ ë¬¸ì œë“¤ì„ ì •ë¦¬í•´ë´¤ë‹¤.

**ì´ë²ˆ ê¸°íšŒë¥¼ í†µí•´ ë°°í¬ì— ëŒ€í•´ ì¢€ ë” ìì„¸íˆ ì•Œ ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ëì—ˆê³ ,** 

**ìë™í™” êµ¬ì¶•ì— ëŒ€í•´ì„œë„ í•œë²ˆ ë” ê²½í—˜í•´ë³´ëŠ” ê³„ê¸°ê°€ ëë˜ê²ƒ ê°™ë‹¤.**

ì¤‘ê°„ì— ë¹Œë“œ ìë™ ë²”í•‘ì´ ìƒê°ì²˜ëŸ¼ ë˜ì§€ ì•Šì•„ ìˆ˜ë™ ë¹Œë“œ ë„˜ë²„ë§ì„ ê·¸ëƒ¥ ì“¸ê¹Œ í•˜ë©° ë°˜í¬ê¸° í–ˆì—ˆëŠ”ë°,

ë§‰ìƒ ìˆìœ¼ë‹ˆê¹Œ **TestFlight ë°°í¬ë¥¼ ìœ„í•´ì„œ ë‚˜ëŠ” ì˜¤ì§ `release/*` ë¸Œëœì¹˜ì— PR**ë§Œ ë‚ ë ¤ì£¼ë©´ ë¼ì„œ ë„ˆë¬´ ì¢‹ë‹¤ ì§€ì´ì´ì¸ì§œğŸ‘ğŸ»

ë¬´ì—‡ë³´ë‹¤ ì´ë²ˆì— ìë™í™”ë¥¼ í†µí•´ ì–»ì€ ê°€ì¥ í° ê²°ê³¼ëŠ” **ë” ì§‘ì¤‘í•˜ê¸° ì¢‹ì€ ê°œë°œí™˜ê²½** ì•Šì„ê¹Œ ì‹¶ë‹¤.

![](assets/img/post/2025/04_11_í…ŒìŠ¤íŠ¸í”Œë¼ì´íŠ¸_ì›¹í›….png){: width="400"}_ğŸ”” ìë™í™”ì˜ ì™„ì„±ì€ ì—­ì‹œ ë””ìŠ¤ì½”ë“œ ì›¹í›… ğŸ””_

## ğŸ”— ë ˆí¼ëŸ°ìŠ¤
> **í•´ë‹¹ ìë£Œë¥¼ ì°¾ì•„ë³´ë©° ë„ì›€ì´ ëë˜ ë§í¬**
>- [TestFlight ìë™í™”](https://sujinnaljin.medium.com/ci-cd-github-actions-%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-testflight-%EC%97%85%EB%A1%9C%EB%93%9C-%EC%9E%90%EB%8F%99%ED%99%94-8ecdbeb227a3)
>- [iOS ì•± ê°œë°œê¶Œí•œ ë¶€ì—¬](https://cheolheelee.tistory.com/415)
>- [Xcode ë¹Œë“œ ë²ˆí˜¸ ìë™ ì¦ê°€](https://medium.com/@mateuszsiatrak/automating-build-number-increments-in-xcode-with-custom-format-a-practical-guide-bcc90a19f716)